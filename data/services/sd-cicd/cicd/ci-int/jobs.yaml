---
$schema: /dependencies/jenkins-config-1.yml

labels:
  service: osde2e

name: ci-int-osde2e-jobs

description: ''

app:
  $ref: /services/sd-cicd/app.yml

instance:
  $ref: /dependencies/ci-int/ci-int.yml

type: jobs

config:
- project:
    name: osde2e-metrics-sync
    label: osde2e
    node: osde2e
    gh_org: openshift
    gh_repo: osde2e
    jobs:
    # ---- run the sync metrics script
    - 'osde2e-metrics-sync':
        branch: main
        display_name: "osde2e datahub metrics sync"
        cron_expression: 'H/15 * * * *'
        ci_cmd: './scripts/metrics-sync.sh'
- project:
    name: osde2e-weather-report
    label: osde2e
    node: osde2e
    gh_org: openshift
    gh_repo: osde2e
    jobs:
    # ---- run the weather report
    - 'osde2e-weather-report':
        branch: gh-pages
        display_name: "osde2e weather report"
        cron_expression: '0 12 * * *'
        ci_cmd: './scripts/generate-weather-reports.sh'
- project:
    name: osde2e-weather-report-to-slack
    label: osde2e
    node: osde2e
    gh_org: openshift
    gh_repo: osde2e
    jobs:
    # ---- run the slack weather report
    - 'osde2e-weather-report-to-slack':
        branch: main
        display_name: "osde2e weather report to slack"
        cron_expression: '0 12 * * *'
        ci_cmd: './scripts/weather-report-to-slack.sh'
- project:
    name: osde2e-granular-alerting
    label: osde2e
    node: osde2e
    gh_org: openshift
    gh_repo: osde2e
    jobs:
    # ---- run the gate report script
    - 'osde2e-granular-alerting':
        branch: main
        display_name: "osde2e granular alerting"
        cron_expression: '0 16 * * *'
        ci_cmd: './scripts/granular-alerting.sh'
- project:
    name: osde2e-trigger-jobs
    label: osde2e
    node: osde2e
    gh_org: openshift
    gh_repo: osde2e
    jobs:
    # ---- run trigger-jobs script
    - 'osde2e-trigger-jobs':
        branch: trigger-ci-jobs
        display_name: "osde2e trigger jobs"
        ci_cmd: './scripts/trigger-jobs.sh'
        upstream: openshift-saas-deploy-saas-clusterimagesets-stage-osd-stage-01
