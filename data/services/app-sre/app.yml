---
$schema: /app-sre/app-1.yml


labels:
  service: app-sre

name: App-SRE

description: |
  A container for App SRE related resources.
  The current codeComponents will be picked up by the gitlab-permissions integration,
  and will assist in on-boarding new team members to the App SRE team.

architectureDocument: https://TODO
sopsUrl: https://gitlab.cee.redhat.com/TODO
onboardingStatus: OnBoarded

grafanaUrl: https://grafana.app-sre.devshift.net/dashboards/f/zskFbCuWz/appsre

escalationPolicy:
  $ref: /teams/placeholder-escalation.yml
serviceOwners:
- name: App-SRE Team
  email: sd-app-sre@redhat.com

dependencies:
- $ref: /dependencies/aws/service.yml
- $ref: /dependencies/ci-int/service.yml
- $ref: /dependencies/ci-ext/service.yml
- $ref: /dependencies/github/service.yml
- $ref: /dependencies/gitlab/service.yml
- $ref: /dependencies/quay/service.yml
- $ref: /dependencies/openshift/service.yml
- $ref: /dependencies/kafka/service.yml

sentryProjects:
- team:
    $ref: /dependencies/sentry/teams/app-sre-stage.yml
  projects:
  - name: app-sre-playground
    description: Playground to test sentry configurations/options
    email_prefix: '[App SRE Playground]'
    platform: python
  - name: app-sre-saas-exporter
    description: saas-exporter project
    email_prefix: '[saas-exporter]'
    platform: python
quayRepos:
- org:
    $ref: /dependencies/quay/app-sre.yml
  items:
  - name: ubi8-ubi-minimal
    description: Mirror of https://access.redhat.com/containers/#/registry.access.redhat.com/ubi8/ubi-minimal
    public: true
    mirror:
      $ref: /dependencies/image-mirrors/registry.access.redhat.com/ubi8/ubi-minimal.yml
  - name: ubi8-ubi
    description: Mirror of https://access.redhat.com/containers/#/registry.access.redhat.com/ubi8/ubi
    public: true
    mirror:
      $ref: /dependencies/image-mirrors/registry.access.redhat.com/ubi8/ubi.yml
  - name: ubi8-ubi-init
    description: Mirror of https://access.redhat.com/containers/#/registry.access.redhat.com/ubi8/ubi-init
    public: true
    mirror:
      $ref: /dependencies/image-mirrors/registry.access.redhat.com/ubi8/ubi-init.yml
  - name: ubi8-go-toolset
    description: Mirror of https://access.redhat.com/containers/#/registry.access.redhat.com/ubi8/go-toolset
    public: true
    mirror:
      $ref: /dependencies/image-mirrors/registry.access.redhat.com/ubi8/go-toolset.yml
  - name: ubi8-nodejs-14
    description: Mirror of https://access.redhat.com/containers/#/registry.access.redhat.com/ubi8/nodejs-14
    public: true
    mirror:
      $ref: /dependencies/image-mirrors/registry.access.redhat.com/ubi8/nodejs-14.yml
  - name: ubi8-nodejs-12
    description: Mirror of https://access.redhat.com/containers/#/registry.access.redhat.com/ubi8/nodejs-12
    public: true
    mirror:
      $ref: /dependencies/image-mirrors/registry.access.redhat.com/ubi8/nodejs-12.yml
  - name: ubi8-nodejs-10
    description: Mirror of https://access.redhat.com/containers/#/registry.access.redhat.com/ubi8/nodejs-10
    public: true
    mirror:
      $ref: /dependencies/image-mirrors/registry.access.redhat.com/ubi8/nodejs-10.yml
  - name: ubi8-nginx-118
    description: Mirror of https://access.redhat.com/containers/#/registry.access.redhat.com/ubi8/nginx-118
    public: true
    mirror:
      $ref: /dependencies/image-mirrors/registry.access.redhat.com/ubi8/nginx-118.yml
  - name: git-keeper
    description: 'Git backup tool: S3, gpg'
    public: true
  - name: s3-reload
    description: Simple binary to trigger a reload when an object in an S3 bucket
      is updated
    public: true
  - name: openshift-acme
    description: Mirror for https://hub.docker.com/r/tnozicka/openshift-acme
    public: true
    # disable mirror during v2 migration
    # description: "Mirror for https://quay.io/tnozicka/openshift-acme"
    # mirror:
    #   $ref: /dependencies/image-mirrors/quay.io/tnozicka/openshift-acme.yml
  - name: diag-container
    description: ''
    public: true
  - name: nginx-gate
    description: ''
    public: true
  - name: enforce-naming
    description: ''
    public: false
  - name: fluentd
    description: ''
    public: true
  - name: vault-manager
    description: ''
    public: true
  - name: vault-exporter
    description: Vault health exporter in prom format
    public: true
  - name: saasherder
    description: saasherder image
    public: true
  - name: catalog-image
    description: catalog-image container
    public: true
  - name: push-saas-metrics
    description: push-saas-metrics
    public: true
  - name: manifest-bouncer
    description: manifest-bouncer tool
    public: true
  - name: busybox
    description: Mirror for docker.io/busybox
    public: false
    mirror:
      $ref: /dependencies/image-mirrors/docker.io/busybox.yml
  - name: nginx
    description: Mirrors docker.io/nginx
    public: false
    mirror:
      $ref: /dependencies/image-mirrors/docker.io/nginx.yml
  - name: saas-exporter
    description: saas-exporter
    public: true
  - name: app-sre-errbot
    description: Slack bot for app-sre
    public: true
  - name: rds-enhanced-metrics-exporter
    description: Export enhanced RDS metrics for AWS RDS instances
    public: true
  - name: prometheus-operator-catalog
    description: prometheus-operator catalog
    public: true
  - name: alpine
    description: Mirrors docker.io/alpine
    public: false
    mirror:
      $ref: /dependencies/image-mirrors/docker.io/alpine.yml
  - name: golang
    description: Mirrors docker.io/golang
    public: false
    mirror:
      $ref: /dependencies/image-mirrors/docker.io/golang.yml
  - name: fluentd-upstream
    description: Mirrors docker.io/fluent/fluentd
    public: true
    mirror:
      $ref: /dependencies/image-mirrors/docker.io/fluent-fluentd.yml
  - name: vegeta-k8s
    description: vegeta-k8s project
    public: true
  - name: mb-k8s
    description: mb-k8s project
    public: true
  - name: envoyproxy
    description: Temporary mirror of envoyproxy. This will be deprecated in favor
      of r.r.i/openshift-service-mesh/proxyv2-rhel8
    public: false
    mirror:
      $ref: /dependencies/image-mirrors/docker.io/envoyproxy.yml
  - name: nginx-redirector
    description: nginx redirector
    public: true


codeComponents:
- name: housekeeping
  resource: other
  url: https://gitlab.cee.redhat.com/dtsd/housekeeping
  gitlabHousekeeping:
    enabled: true
    rebase: false
  jira:
    $ref: /dependencies/jira/issues-redhat-com.yaml
- name: saas-crypt
  resource: other
  url: https://gitlab.cee.redhat.com/dtsd/saas-crypt
- name: devguide
  resource: other
  url: https://gitlab.cee.redhat.com/dtsd/devguide
- name: dev-guidelines
  resource: other
  url: https://gitlab.cee.redhat.com/service/dev-guidelines
  jira:
    $ref: /dependencies/jira/issues-redhat-com.yaml
- name: git-keeper
  resource: upstream
  url: https://github.com/app-sre/git-keeper
- name: manifest-bouncer
  resource: upstream
  url: https://github.com/app-sre/manifest-bouncer
- name: fluentd
  resource: upstream
  url: https://github.com/app-sre/fluentd
- name: nginx-gate
  resource: upstream
  url: https://github.com/app-sre/nginx-gate
- name: vault-manager
  resource: upstream
  url: https://github.com/app-sre/vault-manager
- name: vault-exporter
  resource: upstream
  url: https://github.com/app-sre/vault-exporter
- name: clusterimagesets
  resource: upstream
  url: https://gitlab.cee.redhat.com/service/clusterimagesets
  jira:
    $ref: /dependencies/jira/issues-redhat-com.yaml
- name: csnotify
  resource: upstream
  url: https://github.com/app-sre/csnotify
- name: s3-reload
  resource: upstream
  url: https://github.com/app-sre/s3-reload
- name: push-saas-metrics
  resource: upstream
  url: https://github.com/app-sre/push-saas-metrics
- name: saas-exporter
  resource: upstream
  url: https://github.com/app-sre/saas-exporter
- name: sretoolbox
  resource: upstream
  url: https://github.com/app-sre/sretoolbox
- name: app-sre-errbot
  resource: upstream
  url: https://github.com/app-sre/app-sre-errbot
- name: infra
  resource: other
  url: https://gitlab.cee.redhat.com/app-sre/infra
  gitlabHousekeeping:
    enabled: true
    rebase: false
  jira:
    $ref: /dependencies/jira/issues-redhat-com.yaml
- name: rds-enhanced-metrics-exporter
  resource: upstream
  url: https://github.com/app-sre/rds-enhanced-metrics-exporter
- name: openshift-acme-templates
  resource: upstream
  url: https://github.com/app-sre/openshift-acme-templates
- name: logs-to-elasticsearch-lambda
  resource: upstream
  url: https://github.com/app-sre/logs-to-elasticsearch-lambda
- name: prometheus-operator-catalog
  resource: upstream
  url: https://github.com/app-sre/prometheus-operator-catalog
- name: workday-reminder
  resource: upstream
  url: https://gitlab.cee.redhat.com/app-sre/workday-reminder
- name: vegeta-k8s
  resource: upstream
  url: https://github.com/app-sre/vegeta-k8s
- name: mb-k8s
  resource: upstream
  url: https://github.com/app-sre/mb-k8s
- name: test-git-commit-range
  resource: upstream
  url: https://github.com/app-sre/test-git-commit-range
- name: nginx-redirector
  resource: upstream
  url: https://github.com/app-sre/nginx-redirector
- name: pod-restarter
  resource: upstream
  url: https://gitlab.cee.redhat.com/mafriedm/pod-restarter
- name: sd-sos
  resource: upstream
  url: https://gitlab.cee.redhat.com/service/sd-sos
  gitlabRepoOwners:
    enabled: false
  gitlabHousekeeping:
    enabled: true
    rebase: true
