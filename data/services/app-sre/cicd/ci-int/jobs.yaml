---
$schema: /dependencies/jenkins-config-1.yml

labels:
  service: app-sre

name: ci-int-app-sre-jobs

description: ''

instance:
  $ref: /dependencies/ci-int/ci-int.yml

type: jobs

config:
- project:
    name: ci-int
    label: app-sre
    node: app-sre
    jobs:
    - 'gl-job-sos-report':
        display_name: SOS Report
        gl_group: dtsd
        gl_project: housekeeping

    - 'gl-build-master-osio-scan':
        display_name: Report generator for OSIO scanner
        gl_group: dtsd
        gl_project: osio-scan

    - 'pagerditty':
        display_name: pagerditty

    - 'jenkins-slaves-cleanup':
        display_name: jenkins-slaves-cleanup
        gl_group: app-sre
        gl_project: infra

- project:
    name: clusterimagesets
    label: app-sre
    node: app-sre

    jobs:
    # generates new clusterimagesets and pushes back to staging repo
    - 'clusterimageset-run':
        display_name: clusterimageset-run
        gl_group: service
        gl_project: clusterimagesets

    - 'gl-build-master-clusterimagesets-apply':
        display_name: clusterimagesets apply
        gl_group: service
        gl_project: clusterimagesets

    - 'gl-pr-check-clusterimagesets':
        display_name: clusterimagesets prcheck
        gl_group: service
        gl_project: clusterimagesets

- project:
    name: git-keeper
    label: app-sre
    node: app-sre
    gh_org: app-sre
    gh_repo: git-keeper

    jobs:
    - 'gitkeeper-run':
        display_name: git-keeper backup

- project:
    name: managed-tenants
    label: app-sre
    node: app-sre
    gl_group: service
    gl_project: managed-tenants
    quay_org: osd-addons
    jobs:
    - 'gl-pr-check-managed-tenants':
        display_name: managed-tenants pr-check
    - 'gl-build-master-managed-tenants':
        display_name: managed-tenants build master

- project:
    name: app-sre-errbot-cd
    label: app-sre
    node: app-sre
    gl_group: service
    gl_project: saas-app-sre-errbot
    kube_cluster: app-sre-prod-01
    kube_namespace: app-sre-errbot-production
    saasherder_context: app-sre-errbot
    image_pattern: '^quay\.io/app-sre/app-sre-errbot'
    quay_org: app-sre
    jobs:
    - 'saas-deploy':
        display_name: app-sre-errbot saas deploy
    - 'saas-pr-check':
        display_name: app-sre-errbot saas pr check

- project:
    name: manifest-bouncer
    label: app-sre
    node: app-sre
    gh_org: app-sre
    gh_repo: manifest-bouncer

    jobs:
    - 'manifest-bouncer-run':
        display_name: manifest-bouncer periodic run
