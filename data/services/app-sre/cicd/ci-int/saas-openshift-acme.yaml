---
$schema: /app-sre/saas-file-2.yml

labels:
  service: app-sre

name: saas-openshift-acme
description: SaaS tracking file for openshift-acme

app:
  $ref: /services/app-sre/app.yml

pipelinesProvider:
  $ref: /services/app-interface/pipelines/tekton.app-sre-pipelines.appsrep05ue1.yaml

deployResources:
  requests:
    cpu: 600m
    memory: 3000Mi
  limits:
    cpu: 600m
    memory: 3000Mi

slack:
  workspace:
    $ref: /dependencies/slack/coreos.yml
  channel: sd-app-sre-info

managedResourceTypes:
- ConfigMap
- ServiceAccount
- Role
- RoleBinding
- Deployment

imagePatterns:
- quay.io/app-sre/openshift-acme

# Are you updating refs to deploy openshift-acme to production?
# Please update the ref in the vault saas file as well!
# https://gitlab.cee.redhat.com/service/app-interface/-/blob/master/data/services/vault.devshift.net/cicd/saas.yaml
resourceTemplates:
- name: openshift-acme
  url: https://github.com/app-sre/openshift-acme-templates
  path: /openshift/openshift-acme.template.yaml
  parameters:
    IMAGE: quay.io/app-sre/openshift-acme
    CONTROLLER_IMAGE_TAG: controller-20220309
    EXPOSER_IMAGE_TAG: exposer-20220309
  targets:
  # Visual App-interface
  - namespace:
      $ref: /services/visual-app-interface.devshift.net/namespaces/visual-qontract-stage.yml
    ref: master
  - namespace:
      $ref: /services/visual-app-interface.devshift.net/namespaces/visual-qontract-production.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  # App-interface
  - namespace:
      $ref: /services/app-interface/namespaces/app-interface-stage.yml
    ref: master
    parameters:
      MEMORY_REQUESTS: 500Mi
      MEMORY_LIMITS: 1000Mi
  - namespace:
      $ref: /services/app-interface/namespaces/app-interface-production.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
    parameters:
      MEMORY_REQUESTS: 300Mi
      MEMORY_LIMITS: 600Mi
  # GitHub-mirror
  - namespace:
      $ref: /services/github-mirror/namespaces/github-mirror-stage.yaml
    ref: master
  - namespace:
      $ref: /services/github-mirror/namespaces/github-mirror-production.yaml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
    # App SRE observability
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    parameters:
      MEMORY_REQUESTS: 100Mi
      MEMORY_LIMITS: 200Mi
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
    parameters:
      MEMORY_REQUESTS: 100Mi
      MEMORY_LIMITS: 200Mi
  # Sentry
  - namespace:
      $ref: /services/sentry/namespaces/sentry-stage.yaml
    ref: master
  - namespace:
      $ref: /services/sentry/namespaces/sentry-production.yaml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  # Unleash
  - namespace:
      $ref: /services/unleash/namespaces/app-sre-stage-01.yml
    ref: master
  - namespace:
      $ref: /services/unleash/namespaces/app-sre-prod-01.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  # Dashdotdb
  - namespace:
      $ref: /services/dashdot/namespaces/app-sre-stage-01.yml
    ref: master
  - namespace:
      $ref: /services/dashdot/namespaces/app-sre-prod-01.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  # per-cluster observability namespaces
  - namespace:
      $ref: /openshift/app-sre-prod-01/namespaces/app-sre-observability-per-cluster.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  - namespace:
      $ref: /openshift/app-sre-prod-03/namespaces/app-sre-observability-per-cluster.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  - namespace:
      $ref: /openshift/app-sre-prod-04/namespaces/app-sre-observability-per-cluster.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  - namespace:
      $ref: /openshift/app-sre-stage-01/namespaces/app-sre-observability-per-cluster.yml
    ref: master
  - namespace:
      $ref: /openshift/app-sre-stage-02/namespaces/app-sre-observability-per-cluster.yml
    ref: master
  - namespace:
      $ref: /openshift/appsres04ue2/namespaces/app-sre-observability-per-cluster.yml
    ref: master
  - namespace:
      $ref: /openshift/crcs02ue1/namespaces/app-sre-observability-per-cluster.yml
    ref: master
  - namespace:
      $ref: /openshift/insights/crcgovs02ue1/namespaces/app-sre-observability-per-cluster.yml
    ref: master
  - namespace:
      $ref: /openshift/insights/c-rh-c-eph/namespaces/app-sre-observability-per-cluster.yml
    ref: master
  - namespace:
      $ref: /openshift/insights/crcd01ue1/namespaces/app-sre-observability-per-cluster.yml
    ref: master
  - namespace:
      $ref: /openshift/crcp01ue1/namespaces/app-sre-observability-per-cluster.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  - namespace:
      $ref: /openshift/quays02ue1/namespaces/app-sre-observability-per-cluster.yml
    ref: master
  - namespace:
      $ref: /openshift/quayp04ue2/namespaces/app-sre-observability-per-cluster.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  - namespace:
      $ref: /openshift/quayp05ue1/namespaces/app-sre-observability-per-cluster.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  - namespace:
      $ref: /openshift/clairp01ue1/namespaces/app-sre-observability-per-cluster.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  - namespace:
      $ref: /openshift/ocmquayrop01uw2/namespaces/app-sre-observability-per-cluster.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  - namespace:
      $ref: /openshift/ocmquayrop01ew1/namespaces/app-sre-observability-per-cluster.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  - namespace:
      $ref: /openshift/ocmquayrop01ue1/namespaces/app-sre-observability-per-cluster.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  - namespace:
      $ref: /openshift/telemeter-prod-01/namespaces/app-sre-observability-per-cluster.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  - namespace:
      $ref: /openshift/che-dev/namespaces/app-sre-observability-per-cluster.yml
    ref: master
  # Code Quarkus
  - namespace:
      $ref: /services/quarkus/namespaces/code-quarkus-redhat-stage.yml
    ref: master
  - namespace:
      $ref: /services/quarkus/namespaces/code-quarkus-stage.yml
    ref: master
  - namespace:
      $ref: /services/quarkus/registry/namespaces/registry-quarkus-redhat-stage.yml
    ref: master
  - namespace:
      $ref: /services/quarkus/registry/namespaces/registry-quarkus-redhat-production.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  - namespace:
      $ref: /services/quarkus/namespaces/code-quarkus-production.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  - namespace:
      $ref: /services/quarkus/namespaces/code-quarkus-redhat-production.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  # UHC
  - namespace:
      $ref: /services/ocm/namespaces/uhc-integration.yml
    ref: master
  # Insights
  - namespace:
      $ref: /services/insights/turnpike/namespaces/stage-turnpike-stage.yml
    ref: master
    parameters:
      MEMORY_REQUESTS: 100Mi
      MEMORY_LIMITS: 200Mi
  - namespace:
      $ref: /services/insights/turnpike/namespaces/prod-turnpike-prod.yml
    ref: master
  # Assisted Installer
  - namespace:
      $ref: /services/assisted-installer/namespaces/assisted-installer-stage.yml
    ref: master
  - namespace:
      $ref: /services/assisted-installer/namespaces/assisted-installer-production.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  # Managed Connectors
  - namespace:
      $ref: /services/managed-connectors/namespaces/managed-connectors-stage.yaml
    ref: master
  - namespace:
      $ref: /services/managed-connectors/namespaces/managed-connectors-production.yaml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  # Managed Services
  - namespace:
      $ref: /services/managed-services/namespaces/managed-services-stage.yml
    ref: master
  - namespace:
      $ref: /services/managed-services/namespaces/managed-services-production.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  # Cincinnati
  - namespace:
      $ref: /services/cincinnati/namespaces/cincinnati-stage.yml
    ref: master
  - namespace:
      $ref: /services/cincinnati/namespaces/cincinnati-production.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  # Devfile Registry
  - namespace:
      $ref: /services/devfile-registry/namespaces/devfile-registry-stage.yml
    ref: master
  - namespace:
      $ref: /services/devfile-registry/namespaces/devfile-registry-production.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  # Red Hat Devfile Registry
  - namespace:
      $ref: /services/devfile-registry/namespaces/devfile-registry-redhat-stage.yml
    ref: master
  - namespace:
      $ref: /services/devfile-registry/namespaces/devfile-registry-redhat-production.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  # MAS SSO
  - namespace:
      $ref: /services/mas-sso/namespaces/mas-sso-stage.yml
    ref: master
  - namespace:
      $ref: /services/mas-sso/namespaces/mas-sso-production.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  # Service Registry
  - namespace:
      $ref: /services/service-registry/namespaces/service-registry-stage.yml
    ref: master
  - namespace:
      $ref: /services/service-registry/namespaces/service-registry-production.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  # Web RCA
  - namespace:
      $ref: /services/web-rca/namespaces/stage.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  - namespace:
      $ref: /services/web-rca/namespaces/production.yml
    ref: master
  # Clair
  - namespace:
      $ref: /services/clair/namespaces/stage.yml
    ref: master
  - namespace:
      $ref: /services/clair/namespaces/production.yml
    ref: master
  # CodeReady Analytics
  - namespace:
      $ref: /services/codeready-analytics/namespaces/bayesian-preview.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  - namespace:
      $ref: /services/codeready-analytics/namespaces/bayesian-production.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  # OSIO
  - namespace:
      $ref: /services/openshift.io/namespaces/dsaas-preview.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  - namespace:
      $ref: /services/openshift.io/namespaces/dsaas-production.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  - namespace:
      $ref: /services/openshift.io/namespaces/launchpad-preview.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  - namespace:
      $ref: /services/openshift.io/namespaces/launchpad-production.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  # Observatorium
  - namespace:
      $ref: /services/rhobs/observatorium/namespaces/observatorium-production.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  - namespace:
      $ref: /services/rhobs/observatorium/namespaces/observatorium-stage.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  - namespace:
      $ref: /services/rhobs/observatorium/observatorium-metrics/namespaces/observatorium-metrics-production.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  - namespace:
      $ref: /services/rhobs/observatorium/observatorium-metrics/namespaces/observatorium-metrics-stage.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  - namespace:
      $ref: /services/rhobs/observatorium-mst/namespaces/observatorium-mst-production.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  - namespace:
      $ref: /services/rhobs/observatorium-mst/namespaces/observatorium-mst-stage.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  - namespace:
      $ref: /services/rhobs/telemeter/namespaces/telemeter-production.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  - namespace:
      $ref: /services/rhobs/telemeter/namespaces/telemeter-stage.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  - namespace:
      $ref: /openshift/appsrep06ue2/namespaces/app-sre-observability-per-cluster.yml
    ref: d52fc8f622ce0b59c943eab021ad2538d5a3097d
  - namespace:
      $ref: /openshift/hshifti01ue1/namespaces/app-sre-observability-per-cluster.yml
    ref: master
  - namespace:
      $ref: /services/glitchtip/namespaces/glitchtip-stage.yml
    ref: master
  - namespace:
      $ref: /openshift/rhobs-testing/namespaces/app-sre-observability-per-cluster.yml
    ref: master
  - namespace:
      $ref: /services/configuration-anomaly-detection/namespaces/configuration-anomaly-detection-stage.yaml
    ref: master
  - namespace:
      $ref: /openshift/kcps01ue1/namespaces/app-sre-observability-per-cluster.yml
    ref: master
  # RHOSE
  - namespace:
      $ref: /services/rhose/namespaces/stage.yml
    ref: master
  - namespace:
      $ref: /services/rhose/namespaces/production.yml
    ref: master
