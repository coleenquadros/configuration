---
$schema: /app-sre/saas-file-2.yml

labels:
  service: app-sre

name: saas-openshift-acme
description: SaaS tracking file for openshift-acme

app:
  $ref: /services/app-sre/app.yml

pipelinesProvider:
  $ref: /services/app-interface/pipelines/tekton.app-sre-pipelines.appsrep05ue1.yaml

deployResources:
  requests:
    cpu: 600m
    memory: 3000Mi
  limits:
    cpu: 600m
    memory: 3000Mi

slack:
  workspace:
    $ref: /dependencies/slack/redhat-internal.yml
  channel: sd-app-sre-info

managedResourceTypes:
- ConfigMap
- ServiceAccount
- Role
- RoleBinding
- Deployment

imagePatterns:
- quay.io/app-sre/openshift-acme

# OPENSHIFT-ACME is deprecated
# The remaining targets here are migrating to cert-manager and are from clusters not managed by app-sre.
# https://issues.redhat.com/browse/RHCLOUD-20591
resourceTemplates:
- name: openshift-acme
  url: https://github.com/app-sre/openshift-acme-templates
  path: /openshift/openshift-acme.template.yaml
  parameters:
    IMAGE: quay.io/app-sre/openshift-acme
    CONTROLLER_IMAGE_TAG: controller-20220309
    EXPOSER_IMAGE_TAG: exposer-20220309
  targets:
  - namespace:
      $ref: /openshift/insights/c-rh-c-eph/namespaces/app-sre-observability-per-cluster.yml
    ref: master
    delete: true
  - namespace:
      $ref: /openshift/insights/crcd01ue1/namespaces/app-sre-observability-per-cluster.yml
    ref: master
    delete: true
  - namespace:
      $ref: /openshift/rhobs-testing/namespaces/app-sre-observability-per-cluster.yml
    ref: master
    delete: true
