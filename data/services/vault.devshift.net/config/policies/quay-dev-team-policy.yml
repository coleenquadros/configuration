---
$schema: /vault-config/policy-1.yml

labels:
  service: vault.devshift.net

name: "quay-dev-team-policy"
instance:
  $ref: /services/vault.devshift.net/config/instances/devshift-net.yml
rules: |
  path "app-interface/metadata/" {
    capabilities = ["list"]
  }

  # quay-builder
  path "app-interface/metadata/quay-builder/" {
    capabilities = ["list"]
  }
  path "app-interface/metadata/quay-builder/*" {
    capabilities = ["list", "read"]
  }
  path "app-interface/data/quay-builder/*" {
    capabilities = ["create", "update", "read"]
  }

  # quayio-stage
  path "app-interface/metadata/quayio-stage/" {
    capabilities = ["list"]
  }
  path "app-interface/metadata/quayio-stage/*" {
    capabilities = ["list", "read"]
  }
  path "app-interface/data/quayio-stage/*" {
    capabilities = ["create", "update", "read"]
  }

  # quayio-production-us-east-1
  path "app-interface/metadata/quayio-prod-us-east-1/" {
    capabilities = ["list"]
  }
  path "app-interface/metadata/quayio-prod-us-east-1/*" {
    capabilities = ["list", "read"]
  }
  # path "app-interface/data/quayio-prod-us-east-1/*" {
  #   capabilities = ["create", "update", "read"]
  # }

  # quayio-production-us-east-2
  path "app-interface/metadata/quayio-prod-us-east-2/" {
    capabilities = ["list"]
  }
  path "app-interface/metadata/quayio-prod-us-east-2/*" {
    capabilities = ["list", "read"]
  }
  # path "app-interface/data/quayio-prod-us-east-2/*" {
  #   capabilities = ["create", "update", "read"]
  # }

  # quayio-prod-shared-secrets
  path "app-interface/metadata/quayio-prod-shared-secrets/" {
    capabilities = ["list"]
  }
  path "app-interface/metadata/quayio-prod-shared-secrets/*" {
    capabilities = ["list", "read"]
  }
  # path "app-interface/data/quayio-prod-shared-secrets/*" {
  #   capabilities = ["read"]
  # }
