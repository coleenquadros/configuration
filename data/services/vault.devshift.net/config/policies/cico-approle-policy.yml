---
$schema: /vault-config/policy-1.yml

labels:
  service: vault.devshift.net

name: "cico-approle-policy"
instance:
  $ref: /services/vault.devshift.net/config/instances/devshift-net.yml
rules: |
  #policy for CICO vault plugin
  path "devtools-osio-ci/*" {
    capabilities = ["read"]
  }
  #allow to read cico secrets from app-sre secrets engine
  path "app-sre/cico/*" {
    capabilities = ["read"]
  }
  path "app-sre/creds/kube-configs/app-sre-stage-02" {
    capabilities = ["read"]
  }
  path "app-sre/creds/kube-configs/app-sre-prod-03" {
    capabilities = ["read"]
  }
  path "app-sre/creds/kube-configs/dsaas" {
    capabilities = ["read"]
  }
  path "app-sre/creds/cico-devtools-approle" {
    capabilities = ["read"]
  }
