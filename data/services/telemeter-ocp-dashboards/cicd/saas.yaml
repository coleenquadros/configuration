---
$schema: /app-sre/saas-file-1.yml

labels:
  service: telemeter-ocp-dashboards

name: saas-telemeter-ocp-dashboards
description: SaaS tracking file for Telemeter OCP dashboards

app:
  $ref: /services/telemeter-ocp-dashboards/app.yml

instance:
  $ref: /dependencies/ci-int/ci-int.yml

slack:
  workspace:
    $ref: /dependencies/slack/coreos.yml
  channel: sd-app-sre-info

managedResourceTypes:
- ConfigMap
- ServiceAccount
- Role
- RoleBinding
- DeploymentConfig
- Service

imagePatterns:
- quay.io/app-sre/grafana
- quay.io/app-sre/openshift-oauth-proxy
- quay.io/app-sre/k8s-sidecar

authentication:
  image:
    path: app-sre/quay/app-sre-pull
    field: all

resourceTemplates:
- name: grafana
  url: https://gitlab.cee.redhat.com/data-hub/telemeter-ocp-dashboards
  path: /openshift/templates/grafana.yaml
  parameters:
    SESSION_SECRET: test
    IMAGE_PROXY: quay.io/app-sre/openshift-oauth-proxy:v1.0.0
  targets:
  - namespace:
      $ref: /services/telemeter-ocp-dashboards/namespaces/dh-stage-prometheus-lts.yml
    ref: master
    parameters:
      REPLICAS: 3
  - namespace:
      $ref: /services/telemeter-ocp-dashboards/namespaces/dh-prod-prometheus-lts.yml
    ref: 18c95d48f8c0121e770be6e33aecc44002a24a7a
    parameters:
      REPLICAS: 3
- name: dashboards
  url: https://gitlab.cee.redhat.com/data-hub/telemeter-ocp-dashboards
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/telemeter-ocp-dashboards/namespaces/dh-stage-prometheus-lts.yml
    ref: master
  - namespace:
      $ref: /services/telemeter-ocp-dashboards/namespaces/dh-prod-prometheus-lts.yml
    ref: master
