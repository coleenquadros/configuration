---
$schema: /dependencies/jenkins-config-1.yml

labels:
  service: srep-operators

name: ci-ext-srep-operators-jobs

description: ''

app:
  $ref: /services/osd-operators/app.yml

instance:
  $ref: /dependencies/ci-ext/ci-ext.yml

type: jobs

config:
- project:
    name: srep-operators
    label: srep-operators
    node: srep-operators
    gh_org: openshift
    quay_org: app-sre
    pr_check_script_path: './hack/app_sre_pr_check.sh'
    jobs:
    - 'gh-pr-check':
        gh_repo: aws-efs-operator
        display_name: aws-efs-operator pr-check
        pr_check_script_path: make pr-check
    - 'gh-pr-check':
        gh_repo: dedicated-admin-operator
        pr_check_script_path: './build/check_pr.sh'
        display_name: dedicated-admin-operator pr-check
    - 'gh-pr-check':
        gh_repo: managed-cluster-config
        display_name: managed-cluster-config pr-check
    - 'gh-pr-check':
        gh_repo: managed-prometheus-exporter-dns
        display_name: managed-prometheus-exporter-dns pr-check
    - 'gh-pr-check':
        gh_repo: managed-prometheus-exporter-ebs-iops-reporter
        display_name: managed-prometheus-exporter-ebs-iops-reporter pr-check
    - 'gh-pr-check':
        gh_repo: managed-prometheus-exporter-stuck-ebs-vols
        display_name: managed-prometheus-exporter-stuck-ebs-vols pr-check
    - 'operator-curator':
        gh_repo: operator-curator
        display_name: operator curator
        cron_expression: 'H 0 * * *'
    - 'gh-pr-check':
        gh_repo: managed-cluster-validating-webhooks
        pr_check_script_path: './build/pr_check.sh'
        display_name: managed-cluster-validating-webhooks pr-check

- project:
    name: sre-ssh-proxy
    label: sre-ssh-proxy
    node: app-sre
    gh_org: openshift
    gh_repo: sre-ssh-proxy-container
    quay_org: app-sre
    pr_check_script_path: './hack/app_sre_pr_check.sh'
    build_deploy_script_path: './hack/app_sre_build_deploy.sh'
    jobs:
      - 'gh-build-master':
          display_name: sre-ssh-proxy build master
      - 'gh-pr-check':
          display_name: sre-ssh-proxy pr-check

- project:
    name: managed-prometheus-exporter-initcontainer
    label: managed-prometheus-exporter-initcontainer
    node: app-sre
    gh_org: openshift
    gh_repo: managed-prometheus-exporter-initcontainer
    quay_org: app-sre
    pr_check_script_path: './hack/app_sre_pr_check.sh'
    build_deploy_script_path: './hack/app_sre_build_deploy.sh'
    jobs:
      - 'gh-build-master':
          display_name: managed-prometheus-exporter-initcontainer build master
      - 'gh-pr-check':
          display_name: managed-prometheus-exporter-initcontainer pr-check
- project:
    name: managed-prometheus-exporter-base
    label: managed-prometheus-exporter-base
    node: app-sre
    gh_org: openshift
    gh_repo: managed-prometheus-exporter-base
    quay_org: app-sre
    pr_check_script_path: './hack/app_sre_pr_check.sh'
    build_deploy_script_path: './hack/app_sre_build_deploy.sh'
    jobs:
      - 'gh-build-master':
          display_name: managed-prometheus-exporter-base build master
      - 'gh-pr-check':
          display_name: managed-prometheus-exporter-base pr-check
