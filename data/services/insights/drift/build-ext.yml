$schema: /dependencies/jenkins-config-1.yml
labels:
  service: drift
  platform: insights
name: ci-ext-insights-drift
description: Job for building Insights Drift app
app:
  $ref: /services/insights/drift/app.yml
instance:
  $ref: /dependencies/ci-ext/ci-ext.yml
type: jobs
config:
  - project:
      name: drift-backend
      label: rhel8
      node: rhel8
      quay_org: cloudservices
      gh_org: RedHatInsights
      gh_repo: drift-backend
      jobs:
        - insights-gh-pr-check:
            display_name: drift-backend pr-check
        - insights-gh-build-master:
            display_name: drift-backend build-master
        - insights-gh-build-master:
            display_name: drift-backend build-security-compliance
            branch: security-compliance

  - project:
      name: drift-frontend
      label: insights
      node: insights
      gh_org: RedHatInsights
      gh_repo: drift-frontend
      quay_org: cloudservices
      jobs:
        - insights-gh-pr-check:
            display_name: drift-frontend pr-check
        - insights-gh-build-master:
            display_name: drift-frontend build-master
