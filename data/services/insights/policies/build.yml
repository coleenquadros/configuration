$schema: /dependencies/jenkins-config-1.yml
labels:
  service: policies
name: ci-ext-policies-jobs
description: policies ci-ext jobs
app:
  $ref: /services/insights/policies/app.yml
instance:
  $ref: /dependencies/ci-ext/ci-ext.yml
type: jobs
config:
  - project:
      name: policies-ui-backend
      label: insights
      node: insights
      gh_org: RedHatInsights
      gh_repo: policies-ui-backend
      quay_org: cloudservices
      build_deploy_script_path: ./.rhcicd/build_deploy.sh
      pr_check_script_path: ./.rhcicd/pr_check.sh
      jobs:
        - insights-gh-build-master:
            display_name: policies-ui-backend build-master
        - insights-gh-pr-check:
            display_name: policies-ui-backend pr-check
        - insights-gh-build-master:
            display_name: policies-ui-backend build-security-compliance
            branch: security-compliance
        - insights-gh-scheduled-rebuild:
            display_name: policies-ui-backend build-security-compliance-weekly
            branch: security-compliance
            cron_expression: "H H/1 0-3 * 6"

  - project:
      name: policies-engine
      label: insights
      node: insights
      gh_org: RedHatInsights
      gh_repo: policies-engine
      quay_org: cloudservices
      build_deploy_script_path: ./.rhcicd/build_deploy.sh
      pr_check_script_path: ./.rhcicd/pr_check.sh
      jobs:
        - insights-gh-build-master:
            display_name: policies-engine build-master
        - insights-gh-pr-check:
            display_name: policies-engine pr-check
        - insights-gh-build-master:
            display_name: policies-engine build-security-compliance
            branch: security-compliance
        - insights-gh-scheduled-rebuild:
            display_name: policies-engine build-security-compliance-weekly
            branch: security-compliance
            cron_expression: "H H/1 0-3 * 6"
  - project:
      name: policies-ui-frontend
      label: insights
      node: insights
      gh_org: RedHatInsights
      gh_repo: policies-ui-frontend
      quay_org: cloudservices
      jobs:
        - insights-gh-pr-check:
            display_name: policies-ui-frontend pr-check
        - insights-gh-build-master:
            display_name: policies-ui-frontend build-master
