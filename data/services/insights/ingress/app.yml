---
$schema: /app-sre/app-1.yml

labels:
  service: ingress
  platform: insights
  type: core

name: ingress

description: |
  The ingress data pipeline is a collection of applications that ensure payloads
  sent to the platform are processed by the proper services and applications once the upload is complete.
  It transfers data using Kafka to each individual microservice where data can be extracted and passed along to the rest of the platform apps.

architectureDocument: https://clouddot.pages.redhat.com/docs/dev/services/ingress.html
sopsUrl: https://gitlab.cee.redhat.com/service/app-interface/-/tree/master/docs/cloud.redhat.com/app-sops/ingress
grafanaUrl: https://grafana.app-sre.devshift.net/d/Av2gccIZk/ingress?orgId=1
onboardingStatus: OnBoarded

parentApp:
  $ref: /services/insights/app.yml

serviceOwners:
- name: Stephen Adams
  email: sadams@redhat.com

serviceNotifications:
- name: Rodrigo Antunes
  email: rantunes@redhat.com
- name: Eduardo Cerqueira
  email: ecerquei@redhat.com

dependencies:
- $ref: /dependencies/ci-ext/service.yml
- $ref: /dependencies/ci-int/service.yml
- $ref: /dependencies/github/service.yml
- $ref: /dependencies/quay/service.yml
- $ref: /dependencies/openshift/service.yml
- $ref: /dependencies/aws/service.yml
- $ref: /dependencies/gitlab/service.yml
- $ref: /dependencies/kafka/service.yml

quayRepos:
- org:
    $ref: /dependencies/quay/cloudservices.yml
  items:
  - name: insights-ingress
    public: true
    description: Repo for the ingress Insights app
  - name: insights-pup
    public: false
    description: Repo for the ingress Insights app
  - name: insights-puptoo
    public: true
    description: Repo for the ingress Insights app
  - name: insights-storage-broker
    public: true
    description: Repo for the ingress Insights app
  - name: upload-service
    public: false
    description: Repo for the ingress Insights app
  - name: ingress-sideloader
    public: false
    description: Repo for the ingress Insights app


codeComponents:
- name: insights-ingress-go
  resource: upstream
  url: https://github.com/RedHatInsights/insights-ingress-go
- name: insights-pup
  resource: upstream
  url: https://github.com/RedHatInsights/insights-pup
- name: insights-puptoo
  resource: upstream
  url: https://github.com/RedHatInsights/insights-puptoo
- name: insights-storage-broker
  resource: upstream
  url: https://github.com/RedHatInsights/insights-storage-broker
- name: insights-upload
  resource: upstream
  url: https://github.com/RedHatInsights/insights-upload
- name: ingress-sideloader
  resource: upstream
  url: https://gitlab.cee.redhat.com/insights-platform/ingress-sideloader

escalationPolicy:
  $ref: /teams/insights/escalation-policies/general.yml
