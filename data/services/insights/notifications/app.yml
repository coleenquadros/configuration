---
$schema: /app-sre/app-1.yml

labels:
  service: notifications
  platform: insights

name: notifications

description: | 
  Notifications and Integrations services on console.redhat.com
  This is used by customer to be notified of various things related to their account (Kafka cluster down, new advisor recommendation, new drift detected,...)
  Any application of console.redhat.com can send events to the Notifications&Integrations service
  Those events are processed and according to customer preference will trigger 0-N integrations endpoints
  At the time of writing, a use can choose to send emails or trigger 0-N webhooks when an event is received

statusPageComponents:
- $ref: /dependencies/statuspage/status-page-component-insights-notifications.yml

architectureDocument: https://clouddot.pages.redhat.com/notifications-docs/dev/index.html
sopsUrl: https://clouddot.pages.redhat.com/notifications-docs/dev/runbooks/index.html
grafanaUrls:
- title: Notifications Dashboard
  url: https://grafana.app-sre.devshift.net/d/KQIVyFuMk/notifications-dashboard?orgId=1&var-datasource=crcp01ue1-prometheus&var-service=All&var-jvmcontainer=All&var-kubernetes_namespace=notifications-prod
onboardingStatus: InProgress

parentApp:
  $ref: /services/insights/app.yml

escalationPolicy:
  $ref: /teams/insights/escalation-policies/crc-notifications-escalations.yml
  
serviceOwners:
- name: Thomas Heute (Engineering Manager)
  email: theute@redhat.com
- name: Josejulio Martinez (Project Lead)
  email: jmartine@redhat.com
- name: Heiko Rupp (Architect)
  email: hrupp@redhat.com

dependencies:
- $ref: /dependencies/github/service.yml
- $ref: /dependencies/quay/service.yml
- $ref: /dependencies/openshift/service.yml
- $ref: /dependencies/aws/service.yml
- $ref: /dependencies/ci-int/service.yml
- $ref: /dependencies/ci-ext/service.yml

quayRepos:
- org:
    $ref: /dependencies/quay/cloudservices.yml
  items:
  - name: notifications-backend
    public: true
    description: Notifications service that serves the UI
  - name: notifications-gw
    public: true
    description: Notifications service provides a http-Kafka bridge
  - name: notifications-aggregator
    public: true
    description: Notifications service that contains the email aggregation cronjob
  - name: notifications-engine
    public: true
    description: Notifications service responsible for sending notifications to integrations
  - name: notifications-frontend
    public: true
    description: Notifications service frontend image
  - name: user-preferences-frontend
    public: true
    description: User Preferences frontend image

codeComponents:
- name: notifications-backend
  resource: upstream
  url: https://github.com/RedHatInsights/notifications-backend
- name: notifications-gw
  resource: upstream
  url: https://github.com/RedHatInsights/notifications-gw
- name: notifications-mirrormaker
  resource: upstream
  url: https://github.com/RedHatInsights/notifications-mirrormaker
- name: notifications-frontend
  resource: upstream
  url: https://github.com/RedHatInsights/notifications-frontend
- name: user-preferences-frontend
  resource: upstream
  url: https://github.com/RedHatInsights/user-preferences-frontend

