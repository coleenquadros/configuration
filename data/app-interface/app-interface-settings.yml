---
$schema: /app-interface/app-interface-settings-1.yml

labels: {}

name: app-interface-settings
description: App Interface settings

repoUrl: https://gitlab.cee.redhat.com/service/app-interface

# if set to true, use vault as secret source
# if set to false, use config file as secret source
vault: true

# kubernetes binary to use
# options:
# - kubectl
# - oc
kubeBinary: oc

# In order to submit PRs to app-interface
# in the case that the repo is not accessible during
# run time of an integration, use this service as a gateway
# options:
# - sqs
# - gitlab
pullRequestGateway: sqs

# In order to submit MRs to app-interface
# in the case that the repo is not accessible during
# run time of an integration, use this service as a gateway
# options:
# - sqs
# - gitlab
mergeRequestGateway: sqs

# Used to dynamically generate Jenkins jobs to deploy saas files
saasDeployJobTemplate: openshift-saas-deploy
# Default hash length to use in openshift-saas-deploy
# Can be overridden in a saas file resource template level
hashLength: 7

# In order to be able to send emails using an smtp client
smtp:
  mailAddress: redhat.com
  credentials:
    path: app-sre/creds/smtp
    field: all

# Configuration for the github-repo-invites integration.
# Information to obtain github token of app-sre bot.
githubRepoInvites:
  credentials:
    path: app-sre/creds/github-app-sre-bot
    field: accept-invitations-token

ldap:
  serverUrl: ldap.corp.redhat.com
  baseDn: ou=users,dc=redhat,dc=com

# Populate this map to enforce service dependencies
# are persisted in app-interface
dependencies:
- type: openshift
  services:
  - $ref: /dependencies/openshift/service.yml
- type: aws
  services:
  - $ref: /dependencies/aws/service.yml
  - $ref: /dependencies/openshift/service.yml
- type: github
  services:
  - $ref: /dependencies/github/service.yml
- type: gitlab
  services:
  - $ref: /dependencies/gitlab/service.yml
- type: quay
  services:
  - $ref: /dependencies/quay/service.yml
- type: ci-int
  services:
  - $ref: /dependencies/ci-int/service.yml
- type: ci-ext
  services:
  - $ref: /dependencies/ci-ext/service.yml
- type: kafka
  services:
  - $ref: /dependencies/kafka/service.yml

# Populate this map to allow credentials requests
# of additional credentials
credentials:
- name: app-interface-production-dev-access
  secret:
    path: app-sre/creds/app-interface/production/basic-auth
    field: dev-access
- name: app-interface-production-cicd-access
  secret:
    path: app-sre/creds/app-interface/production/basic-auth
    field: cicd-access
- name: ocm-resources-ams-job-client-id-production
  secret:
    path: sd-uhc/ocm-resources/ams-job
    field: ams-job.clientId.production
- name: ocm-resources-ams-job-client-secret-production
  secret:
    path: sd-uhc/ocm-resources/ams-job
    field: ams-job.clientSecret.production

sqlQuery:
  imageRepository: quay.io/app-sre
  pullSecret:
    provider: vault-secret
    path: app-interface/global/quay/app-sre/quay.io
    version: 2
    type: kubernetes.io/dockercfg

pushGatewayCluster:
  $ref: /openshift/app-sre-prod-01/cluster.yml

alertingServices:
- addons
- alertmanager
- app-interface
- app-sre-observability
- assisted-installer
- ci-int
- ci-ext
- cincinnati
- clair
- compliance
- deadmanssnitch
- devfile-registry
- github-mirror
- hive
- image-builder
- insights
- job-queue
- kas-fleet-manager
- mas-sso
- obervatorium-logs
- observability
- observatorium-logs
- ocm-managed-services
- ocm-sendgrid-service
- ocm-service-log
- openshift
- prometheus
- quay
- rds-approved-versions
- srep
- status-board
- telemeter
- uhc
- uhc-acct-mngr
- uhc-acct-mngr-consumer
- uhc-clusters-cleaner
- uhc-clusters-service
- uhc-gateway
- vault
- srs-fleet-manager
- srs-service-registry
- srs-tenant-manager
- web-rca
- deployment-validation-operator
- registry-quarkus
- app-sre-contract
- cna

endpointMonitoringBlackboxExporterModules:
- http_2xx
- http_3xx
- http_ci_ext
- infogw-prod
- infogw-stage
