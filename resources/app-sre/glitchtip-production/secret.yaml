apiVersion: v1
kind: Secret
metadata:
  name: redis-credentials
  annotations:
    qontract.recycle: "true"
type: Opaque
stringData:
  redis.url: "rediss://:{{{ vault('app-sre/integrations-output/terraform-resources/app-sre-prod-04/glitchtip-production/glitchtip-elasticache', 'db.auth_token') }}}@{{{ vault('app-sre/integrations-output/terraform-resources/app-sre-prod-04/glitchtip-production/glitchtip-elasticache', 'db.endpoint') }}}:{{{ vault('app-sre/integrations-output/terraform-resources/app-sre-prod-04/glitchtip-production/glitchtip-elasticache', 'db.port') }}}"
# temporary solution until solution in design doc
# https://gitlab.cee.redhat.com/service/app-interface/-/blob/master/docs/app-sre/design-docs/terraform-output-secret-format.md 
# has been implemented
