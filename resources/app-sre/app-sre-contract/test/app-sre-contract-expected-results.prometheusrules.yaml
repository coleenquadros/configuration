apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  labels:
    prometheus: app-sre
    role: alert-rules
  name: app-sre-contract
spec:
  groups:
  - name: contract-violations.rules
    rules:
    - alert: IncorrectMetadataArchitectureDocument
      annotations:
        dashboard: ''
        html_url: https://gitlab.cee.redhat.com/service/app-interface/blob/master/resources/app-sre/app-sre-contract/app-sre-contract.prometheusrules.yaml.j2
        link_url: https://gitlab.cee.redhat.com/app-sre/contract/-/blob/master/content/service/metadata.md
        message: We have identified that app app-metadata-tests, stored in app-interface
          under /services/app-metadata-tests/app.yml does not have a valid architectureDocument.
          The value we have found is https://TODO.
        runbook: Please correct this piece of information, which is part of the acceptance
          criteria for keeping this application supported by app-sre.
      expr: '1

        '
      for: 1m
      labels:
        app: app-metadata-tests
        jiralert: TEST
        service: app-sre-contract
        severity: medium
    - alert: IncorrectMetadataSOPsUrl
      annotations:
        dashboard: ''
        html_url: https://gitlab.cee.redhat.com/service/app-interface/blob/master/resources/app-sre/app-sre-contract/app-sre-contract.prometheusrules.yaml.j2
        link_url: https://gitlab.cee.redhat.com/app-sre/contract/-/blob/master/content/service/metadata.md
        message: We have identified that app app-metadata-tests, stored in app-interface
          under /services/app-metadata-tests/app.yml does not have a valid sopsUrl.
          The value we have found is https://gitlab.cee.redhat.com/TODO.
        runbook: Please correct this piece of information, which is part of the acceptance
          criteria for keeping this application supported by app-sre.
      expr: '1

        '
      for: 1m
      labels:
        app: app-metadata-tests
        jiralert: TEST
        service: app-sre-contract
        severity: medium
