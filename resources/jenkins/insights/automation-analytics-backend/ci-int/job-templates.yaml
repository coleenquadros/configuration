- job-template:
    id: 'insights-automation-analytics-backend-gl-pr-check'
    success_note: false
    failure_only: true
    success-note: false
    failure-only: true
    name: '{gl_group}-{gl_project}-pr-check'
    slack_channel_notification: 'consoledot-development-fails'
    wrappers:
    - timeout_wrapper:
        timeout: '{timeout}'
    - ansicolor
    - vault-secrets:
        <<: *vault_defaults
        secrets:
        - *insights_crcd_oc_login
        - *insights_ephemeral_oc_login
        - *app_interface_creds
        - *insights_rh_registry_pull_secret
        - *quay_secret_push
        - *insightsdroid_github
        - *quay_api_token
        - *sonarqube_token
        - *gitlab_token_iqe_bot
        - *ibutsu
    success_note: false
    publishers:
    - junit:
        results: 'artifacts/junit-*.xml'
    - archive:
        artifacts: 'artifacts/**/*'
    - gitlab_message:
        success_note: false
        failure_only: true
        success-note: false
        failure-only: true
        <<: *gitlab_message_defaults
    - gitlab-notifier:
        failure-only: true
        name: '{name}'
        mark-unstable-as-success: false
    - slack:
        room: '{slack_channel_notification}'
        notify-start: false
        notify-success: false
        notify-failure: true
        notify-repeated-failure: true
    <<: *gl_pr_check

- job-template:
    id: 'insights-automation-analytics-backend-cypress-gl-pr-check'
    name: 'AA-{gl_project}-cypress-pr-check'
    success_note: false
    failure_only: true
    success-note: false
    failure-only: true
    branch: "main"
    wrappers:
    - timeout_wrapper:
        timeout: '{timeout}'
    - ansicolor
    - vault-secrets:
        <<: *vault_defaults
        secrets:
        - *insights_ephemeral_oc_login
        - *app_interface_creds
        - *insights_rh_registry_pull_secret
        - *quay_secret_push
        - *quay_api_token
        - *insightsdroid_github
        - *insights_automation_analytics_backend_rh_it_root_ca
        - *gitlab_token_iqe_bot
        - *ibutsu
    publishers:
    - junit:
        results: 'artifacts/junit-*.xml'
    - archive:
        artifacts: 'artifacts/**/*'
    - gitlab_message:
        success_note: false
        failure_only: true
        success-note: false
        failure-only: true
        <<: *gitlab_message_defaults
    - gitlab-notifier:
        failure-only: true
        name: '{name}'
        mark-unstable-as-success: true
    - slack:
        room: '{slack_channel_notification}'
        notify-start: false
        notify-success: false
        notify-failure: true
        notify-repeated-failure: true
    <<: *gl_pr_check

- job-template:
    id: 'insights-automation-analytics-backend-cypress-gl-build-master'
    name: 'AA-{gl_project}-cypress-gl-build-{branch}'
    wrappers:
    - timeout_wrapper:
        timeout: '{timeout}'
    - ansicolor
    - vault-secrets:
        <<: *vault_defaults
        secrets:
        - *insights_rh_registry_pull_secret
        - *quay_secret_push
        - *quay_api_token
        - *insights_automation_analytics_backend_rh_it_root_ca
    <<: *gl_build_master

#- job-template:
#    id: 'insights-automation-analytics-backend-sonarqube-gl-pr-check'
#    name: 'AA-{gl_project}-sonarqube-pr-check'
#    success_note: false
#    failure_only: true
#    success-note: false
#    failure-only: true
#    branch: "main"
#    wrappers:
#    - timeout_wrapper:
#        timeout: '{timeout}'
#    - ansicolor
#    - vault-secrets:
#        <<: *vault_defaults
#        secrets:
#        - *insights_ephemeral_oc_login
#        - *app_interface_creds
#        - *insights_rh_registry_pull_secret
#        - *quay_secret_push
#        - *quay_api_token
#        - *insightsdroid_github
#        - *insights_automation_analytics_backend_sonarqube_token
#        - *insights_automation_analytics_backend_rh_it_root_ca
#        - *gitlab_token_iqe_bot
#        - *ibutsu
#    publishers:
#    - junit:
#        results: 'artifacts/junit-*.xml'
#    - archive:
#        artifacts: 'artifacts/**/*'
#    - gitlab_message:
#        success_note: false
#        failure_only: true
#        success-note: false
#        failure-only: true
#        <<: *gitlab_message_defaults
#    - gitlab-notifier:
#        failure-only: true
#        name: '{name}'
#        mark-unstable-as-success: true
#    - slack:
#        room: '{slack_channel_notification}'
#        notify-start: false
#        notify-success: false
#        notify-failure: true
#        notify-repeated-failure: true
#    <<: *gl_pr_check

- job-template:
    id: 'insights-automation-analytics-backend-sonarqube-gl-build-master'
    name: 'AA-{gl_project}-sonarqube-gl-build-{branch}'
    wrappers:
    - timeout_wrapper:
        timeout: '{timeout}'
    - ansicolor
    - vault-secrets:
        <<: *vault_defaults
        secrets:
        - *insights_rh_registry_pull_secret
        - *quay_secret_push
        - *quay_api_token
        - *insights_automation_analytics_backend_sonarqube_token
        - *insights_automation_analytics_backend_rh_it_root_ca
    <<: *gl_build_master

- job-template:
    id: 'insights-tower-analytics-frontend-sonarqube-gh-pr-check'
    name: '{gh_org}-{gh_repo}-sonarqube-pr-check'
    status_context: "ci.int.devshift.net sonarqube PR build"
    branch: "devel"
    wrappers:
    - timeout_wrapper:
        timeout: '{timeout}'
    - ansicolor
    - vault-secrets:
        <<: *vault_defaults
        secrets:
        - *insights_ephemeral_oc_login
        - *app_interface_creds
        - *insights_rh_registry_pull_secret
        - *quay_secret_push
        - *quay_api_token
        - *insightsdroid_github
        - *insights_tower_analytics_frontend_sonarqube_token
        - *insights_tower_analytics_frontend_rh_it_root_ca
    <<: *insights_gh_pr_check

- job-template:
    id: 'insights-tower-analytics-frontend-sonarqube-gh-build-master'
    name: '{gh_org}-{gh_repo}-sonarqube-gh-build-{branch}'
    wrappers:
    - timeout_wrapper:
        timeout: '{timeout}'
    - ansicolor
    - vault-secrets:
        <<: *vault_defaults
        secrets:
        - *insights_rh_registry_pull_secret
        - *quay_secret_push
        - *quay_api_token
        - *insights_tower_analytics_frontend_sonarqube_token
        - *insights_tower_analytics_frontend_rh_it_root_ca
    <<: *gh_build_master

- job-template:
    id: 'insights-tower-analytics-frontend-clamscan-gh-pr-check'
    name: '{gh_org}-{gh_repo}-clamscan-pr-check'
    status_context: "ci.int.devshift.net clamscan PR build"
    branch: "devel"
    wrappers:
    - timeout_wrapper:
        timeout: '{timeout}'
    - ansicolor
    - vault-secrets:
        <<: *vault_defaults
        secrets:
        - *insights_ephemeral_oc_login
        - *app_interface_creds
        - *insights_rh_registry_pull_secret
        - *quay_secret_push
        - *quay_api_token
        - *insightsdroid_github
        - *insights_tower_analytics_frontend_sonarqube_token
        - *insights_tower_analytics_frontend_rh_it_root_ca
    <<: *insights_gh_pr_check

- job-template:
    id: 'insights-automation-analytics-clamscan-gl-pr-check'
    name: 'AA-{gl_project}-clamscan-pr-check'
    success_note: false
    failure_only: true
    success-note: false
    failure-only: true
    branch: "main"
    wrappers:
    - timeout_wrapper:
        timeout: '{timeout}'
    - ansicolor
    - vault-secrets:
        <<: *vault_defaults
        secrets:
        - *insights_ephemeral_oc_login
        - *app_interface_creds
        - *insights_rh_registry_pull_secret
        - *quay_secret_push
        - *quay_api_token
        - *insightsdroid_github
        - *insights_automation_analytics_backend_rh_it_root_ca
        - *gitlab_token_iqe_bot
        - *ibutsu
    publishers:
    - junit:
        results: 'artifacts/junit-*.xml'
    - archive:
        artifacts: 'artifacts/**/*'
    - gitlab_message:
        success_note: false
        failure_only: true
        success-note: false
        failure-only: true
        <<: *gitlab_message_defaults
    - gitlab-notifier:
        failure-only: true
        name: '{name}'
        mark-unstable-as-success: true
    - slack:
        room: '{slack_channel_notification}'
        notify-start: false
        notify-success: false
        notify-failure: true
        notify-repeated-failure: true
    <<: *gl_pr_check

- job-template:
    id: 'insights-automation-analytics-clamscan-gl-build-master'
    name: 'AA-{gl_project}-clamscan-gl-build-{branch}'
    wrappers:
    - timeout_wrapper:
        timeout: '{timeout}'
    - ansicolor
    - vault-secrets:
        <<: *vault_defaults
        secrets:
        - *insights_rh_registry_pull_secret
        - *quay_secret_push
        - *quay_api_token
        - *insights_automation_analytics_backend_rh_it_root_ca
    <<: *gl_build_master

- job-template:
    id: 'insights-platform-gl-build-cicd-cypress'
    name: '{gl_group}-{gl_project}-gl-build-{branch}'
    wrappers:
    - timeout_wrapper:
        timeout: '{timeout}'
    - ansicolor
    - vault-secrets:
        <<: *vault_defaults
        secrets:
        - *insights_ephemeral_oc_login
        - *app_interface_creds
        - *insights_rh_registry_pull_secret
        - *quay_secret_push
        - *quay_api_token
        - *insightsdroid_github
        - *insights_automation_analytics_backend_rh_it_root_ca
        - *gitlab_token_iqe_bot
        - *ibutsu
    <<: *gl_build_master

- job-template:
    id: 'insights-gl-build-cypress-image'
    name: '{gl_group}-{gl_project}-gl-build-{branch}'
    wrappers:
    - timeout_wrapper:
        timeout: '{timeout}'
    - ansicolor
    - vault-secrets:
        <<: *vault_defaults
        secrets:
        - *insights_ephemeral_oc_login
        - *app_interface_creds
        - *insights_rh_registry_pull_secret
        - *quay_secret_push
        - *quay_api_token
        - *insightsdroid_github
        - *insights_automation_analytics_backend_rh_it_root_ca
        - *gitlab_token_iqe_bot
        - *ibutsu
    <<: *gl_build_master

- job-template:
    id: 'insights-gl-build-iqe-debug-image'
    name: '{gl_group}-{gl_project}-gl-build-{branch}'
    wrappers:
    - timeout_wrapper:
        timeout: '{timeout}'
    - ansicolor
    - vault-secrets:
        <<: *vault_defaults
        secrets:
        - *insights_ephemeral_oc_login
        - *app_interface_creds
        - *insights_rh_registry_pull_secret
        - *quay_secret_push
        - *quay_api_token
        - *insightsdroid_github
        - *insights_automation_analytics_backend_rh_it_root_ca
        - *gitlab_token_iqe_bot
        - *ibutsu
    <<: *gl_build_master

- job-template:
    id: 'insights-platform-gl-build-cicd-clamscan'
    name: '{gl_group}-{gl_project}-gl-build-{branch}'
    wrappers:
    - timeout_wrapper:
        timeout: '{timeout}'
    - ansicolor
    - vault-secrets:
        <<: *vault_defaults
        secrets:
        - *insights_rh_registry_pull_secret
        - *quay_secret_push
        - *quay_api_token
        - *insights_automation_analytics_backend_rh_it_root_ca
    <<: *gl_build_master
