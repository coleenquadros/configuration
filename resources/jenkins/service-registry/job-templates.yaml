# currently not using this. alternatively, using the global job-template 'gl-pr-check'
- job-template:
    id: gl-pr-check-srs-service-registry
    name: "{gl_group}-{gl_project}-gl-pr-check"
    wrappers:
      - timeout_wrapper:
          timeout: "{timeout}"
      - vault-secrets:
          <<: *vault_defaults
          secrets:
          - *quay_secret_push
          - *rhoas-quay-access
    <<: *gl_pr_check

- job-template:
    id: gl-pr-check-srs-fleet-manager
    name: "{gl_group}-{gl_project}-gl-pr-check"
    wrappers:
      - timeout_wrapper:
          timeout: "{timeout}"
      - vault-secrets:
          <<: *vault_defaults
          secrets:
          - *quay_secret_push
          - *rhoas-quay-access
          - *srs_fleet_manager_pr_check
    <<: *gl_pr_check

- job-template:
    id: gl-pr-check-srs-tenant-manager
    name: "{gl_group}-{gl_project}-gl-pr-check"
    wrappers:
      - timeout_wrapper:
          timeout: "{timeout}"
      - vault-secrets:
          <<: *vault_defaults
          secrets:
          - *quay_secret_push
          - *rhoas-quay-access
          - *srs_fleet_manager_pr_check
    <<: *gl_pr_check

- job-template:
    id: gl-build-master-srs-projects
    name: "{name}-gl-build-{branch}"
    wrappers:
      - timeout_wrapper:
          timeout: "{timeout}"
      - vault-secrets:
          <<: *vault_defaults
          secrets:
          - *rhoas-quay-access
          - *ci_jenkins_token
          - *gitlab_token
          - *backup_ecr_push_creds
          - *quay_secret_push
          - *app_sre_bot_push_token
          - *app_interface_creds
    <<: *gl_build_master

- job-template:
    id: service-registry-periodic-test
    name: "{component}-periodic-test"
    publishers:
    - <<: *slack_notify
    wrappers:
      - timeout_wrapper:
          timeout: "{timeout}"
      - ansicolor
      - vault-secrets:
          <<: *vault_defaults
          secrets:
          - *service_registry_perf_test_stage
    <<: *gh_timed

- job-template:
    id: service-registry-performance-test
    name: "{component}-performance-test"
    publishers:
    - <<: *slack_notify
    wrappers:
      - timeout_wrapper:
          timeout: "{timeout}"
      - ansicolor
      - vault-secrets:
          <<: *vault_defaults
          secrets:
          - *service_registry_perf_test_stage
    <<: *gh_timed
    parameters:
    - string:
        name: TEST_SIMULATION
        default: 'End2EndSimulation'
        description: 'gatling class to execute'
    - string:
        name: TEST_USERS
        default: '30'
        description: 'number of users to simulate'
    - string:
        name: TEST_ITERATIONS
        default: '600'
        description: 'number of iterations to perform'
    - string:
        name: TEST_RAMP_TIME
        default: '45'
        description: 'simulation ramp up time'

- job-template:
    id: gh-build-master-srs-projects
    name: "{name}-gh-build-{branch}"
    wrappers:
      - timeout_wrapper:
          timeout: "{timeout}"
      - vault-secrets:
          <<: *vault_defaults
          secrets:
          - *rhoas-quay-access
          - *quay_secret_push
    <<: *gh_build_master
